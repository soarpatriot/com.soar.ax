<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.soar.ax</groupId>
  <artifactId>ax-web</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>ax-core Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <parent>
		<groupId>com.soar.ax</groupId>
		<artifactId>soar-ax</artifactId>
		<version>1.0-SNAPSHOT</version>
		<relativePath>../pom.xml</relativePath>
  </parent>

  <dependencies>
        <dependency>
            <groupId>com.soar.ax</groupId>
            <artifactId>ax-core</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.1.2</version>
        </dependency>
        <dependency>
            <groupId>taglibs</groupId>
            <artifactId>standard</artifactId>
            <version>1.1.2</version>
        </dependency>
    </dependencies>
  <profiles>  
      <profile>  
          <id>tomcat-mojo</id>
		  <build>
		    <finalName>ax-web</finalName>
				   <plugins>
						<plugin> 
							<groupId>org.codehaus.mojo</groupId> 
							<artifactId>tomcat-maven-plugin</artifactId> 
							 <configuration> 
								<url>http://localhost:8080/manager/html</url> 
								<username>tomcat</username> 
								<password>tomcat</password> 
							</configuration > 
						</plugin> 
						
						
			</plugins>
		  </build>
		</profile>  

		<profile>
		   <id>jetty</id>
		   <build>
		    <finalName>ax-web</finalName>
				   <plugins>
						<plugin> 
							<groupId>org.mortbay.jetty</groupId>
							<artifactId>maven-jetty-plugin</artifactId>
								<configuration>
									<scanIntervalSeconds>10</scanIntervalSeconds>
									<stopKey>foo</stopKey>
									<stopPort>9999</stopPort>
									</configuration>
								<executions>
								<execution>
									<id>start-jetty</id>
									<phase>pre-integration-test</phase>
										<goals>
										   <goal>run</goal>
										</goals>
											<configuration>
												<scanIntervalSeconds>0</scanIntervalSeconds>
												<daemon>true</daemon>
											</configuration>
								</execution>
								<execution>
									<id>stop-jetty</id>
									<phase>post-integration-test</phase>
									<goals>
										<goal>stop</goal>
										</goals>
									</execution>
								</executions>
						
						</plugin>
		          </plugins>
		  </build>
		</profile>
		<profile>
		   <id>cargo-tomcat-remote</id>
		   <build>
		    <finalName>ax-web</finalName>
				   <plugins>
						<plugin>
							<groupId>org.codehaus.cargo</groupId>
							<artifactId>cargo-maven2-plugin</artifactId>
							<version>1.0.6</version>
							<configuration>  

									<wait>true</wait>  
									<container>  
										<containerId>tomcat6x</containerId>  
										<type>remote</type><!-- Զ�̲������ͱ�����remote -->  
									</container> 
									<configuration>
										<type>runtime</type>  
										<properties>  
											
											<cargo.tomcat.manager.url>  
												http://127.0.0.1:8080/manager
											</cargo.tomcat.manager.url>  
											<cargo.remote.username>${cargo.tomcat.manager.username}</cargo.remote.username>  
											<cargo.remote.password>${cargo.tomcat.manager.password}</cargo.remote.password>  
											
										</properties> 
									</configuration>
									

							</configuration>  
					 </plugin>
		          </plugins>
		  </build>
		</profile>
		
		<profile>
	     <id>jetty-for-run</id>
		 <build>
			 <plugins> 
				<plugin> 
				  <groupId>org.mortbay.jetty</groupId> 
				  <artifactId>jetty-maven-plugin</artifactId> 
				 
				  <version>7.2.2.v20101205</version>
				  <configuration> 
					 <webAppSourceDirectory>src/main/webapp</webAppSourceDirectory>
					 <!-- 
					
					 <classesDirectory>../ax-web/src/main/resources;../ax-web/src/main/webapp</classesDirectory>
					  -->
					  
					  <classesDirectory>src/main/webapp/WEB-INF/classes</classesDirectory>
					<scanIntervalSeconds>60</scanIntervalSeconds> 
					<stopKey>foo</stopKey>
				  <stopPort>9999</stopPort>
					<webAppConfig> 
					  <contextPath>/ax-web</contextPath>  
					   <!-- set extraClasspath，if more split with ;
					     <extraClasspath>../ax-core/target/classes</extraClasspath> 
					   -->
					</webAppConfig> 
					  <!-- set listen directory --> 
					<scanTargets> 
					  <!--  <scanTarget>../ax-core/target/classes</scanTarget> 
					    <scanTarget>../ax-core/src/main/resources</scanTarget> 
					   -->
					
					</scanTargets>
					<scanTargetPatterns>
			            <scanTargetPattern>
			              <directory>src/main/resources</directory>
			              <includes>
			                <include>**/*.xml</include>
			                <include>**/*.properties</include>
			              </includes>
			              <excludes>
			                <exclude>**/myspecial.xml</exclude>
			                <exclude>**/myspecial.properties</exclude>
			              </excludes>
			            </scanTargetPattern>
			          </scanTargetPatterns>   
					 <argLine>-Xmx1024m</argLine>
				  </configuration> 
				</plugin> 
			 </plugins>
			 </build>
		   </profile>
    </profiles>  
    
    <build>
        <defaultGoal>install</defaultGoal>
        <finalName>ax</finalName> 
        <testResources>
		    <testResource>
			    <directory>src/main/resources</directory>
				<filtering>true</filtering>
			</testResource>
		</testResources>
      
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-enforcer-plugin</artifactId>
                <version>1.0</version>
                <executions>
                    <execution>
                        <id>enforce-java</id>
                        <goals>
                            <goal>enforce</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <rules>
                        <requireJavaVersion>
                            <!-- require JDK 1.5 to run the build -->
                            <version>[1.6,)</version>
                        </requireJavaVersion>
                        <requireMavenVersion>
                            <!-- we need at least Maven 2.0.8 because of a bug fix affecting our antlr usage -->
                            <!-- 2.0.8 not released at this time, so I instead say anything greater that 2.0.7 -->
                            <version>(2.0.7,)</version>
                        </requireMavenVersion>
                    </rules>
                </configuration>
            </plugin>
           </plugins>
      </build>
</project>
